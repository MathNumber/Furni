<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@include file="/common/taglib.jsp"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Trang chá»§</title>
</head>
<body>
	<!-- Start Hero Section -->
	<div class="hero">
		<div class="container">
			<div class="row justify-content-between">
				<div class="col-lg-5">
					<div class="intro-excerpt">
						<h1>Shop</h1>
					</div>
				</div>
				<div class="col-lg-7"></div>
			</div>
		</div>
	</div>
	<!-- End Hero Section -->

	<div class="untree_co-section product-section before-footer-section">
		<div class="container">
			<div class="row">
				<!-- Start Column 1 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-1.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Nordic Chair</h3>
						<strong class="product-price">$50.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 1 -->

				<!-- Start Column 2 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-2.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Kruzo Aero Chair</h3>
						<strong class="product-price">$78.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 2 -->

				<!-- Start Column 3 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-3.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Ergonomic Chair</h3>
						<strong class="product-price">$43.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 3 -->

				<!-- Start Column 1 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-1.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Fiamma Armchair</h3>
						<strong class="product-price">$50.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 1 -->

				<!-- Start Column 2 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-2.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Philomena Armchair</h3>
						<strong class="product-price">$78.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 2 -->

				<!-- Start Column 3 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-3.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Fiona Chair</h3>
						<strong class="product-price">$43.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 3 -->
				<!-- Start Column 1 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-1.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Alva Lounge Chair</h3>
						<strong class="product-price">$50.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 1 -->

				<!-- Start Column 2 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-2.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Michio Armchair</h3>
						<strong class="product-price">$78.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
				<!-- End Column 2 -->

				<!-- Start Column 3 -->
				<div class="col-12 col-md-4 col-lg-4 mb-5">
					<div class="product-item" style="cursor: pointer">
						<img src="<c:url value="/template/web/images/product-3.png"/>"
							class="img-fluid product-thumbnail" />
						<h3 class="product-title">Accent Chair</h3>
						<strong class="product-price">$43.00</strong> <span
							class="icon-cross" onclick="displayModal()"> <img
							src="<c:url value="/template/web/images/cross.svg"/>" class="img-fluid" />
						</span>
					</div>
				</div>
			</div>
			<!-- Modal -->
			<div id="myModal" class="modal">
				<div class="modal-content">
					<p>Do you want to add this product to your cart?</p>
					<button id="modal-yes">Yes</button>
					<button id="modal-no">No</button>
				</div>
			</div>
		</div>
	</div>
	<script>
		let currentProductItem;
		const userId = document.querySelector("#userid");
		
		function showModal(productElement) {
			const modal = document.getElementById("myModal");
			currentProductItem = productElement;
			modal.style.display = "block";
			addModalEventListeners();
		}

		function hideModal() {
			const modal = document.getElementById("myModal");
			modal.style.display = "none";
		}
		function generateRandomProductId() {
			const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
			let productId = "";
			for (let i = 0; i < 8; i++) {
				productId += characters.charAt(Math.floor(Math.random()
						* characters.length));
			}
			return productId;
		}

		function addToCart() {
			const productName = currentProductItem
					.querySelector(".product-title").textContent;
			const productPrice = currentProductItem
					.querySelector(".product-price").textContent;
			const productImg = currentProductItem
					.querySelector(".product-thumbnail");
			const existingCartItems = JSON.parse(localStorage
					.getItem("cartItems"))
					|| [];

			const product = {
				name : productName,
				price : productPrice,
				img : productImg.outerHTML,
				productId : generateRandomProductId(),
			};

			existingCartItems.push(product);
			localStorage
					.setItem("cartItems", JSON.stringify(existingCartItems));
			hideModal();
		}

		function addModalEventListeners() {
			const yesButton = document.getElementById("modal-yes");
			const noButton = document.getElementById("modal-no");

			yesButton.addEventListener("click", addToCart);
			noButton.addEventListener("click", hideModal);
		}

		document.addEventListener("DOMContentLoaded", function() {
			const productItems = document.querySelectorAll(".product-item");

			productItems.forEach(function(productItem) {
				productItem.addEventListener("click", function() {
					showModal(productItem);
				});
			});
		});
	</script>
</body>
</html>